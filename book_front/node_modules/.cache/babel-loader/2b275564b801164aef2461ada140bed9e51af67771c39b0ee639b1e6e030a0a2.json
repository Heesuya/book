{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import BookForm from\"./BookForm\";import Swal from\"sweetalert2\";// SweetAlert2 ÏûÑÌè¨Ìä∏\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookWrite=()=>{const backServer=process.env.REACT_APP_BACK_SERVER;const[searchTitle,setSearchTitle]=useState(\"\");const[bookData,setBookData]=useState({title:\"\",author:\"\",publisher:\"\",description:\"\",image:\"\"});const[bookList,setBookList]=useState([]);const handleSearch=async()=>{if(!searchTitle){Swal.fire({icon:\"warning\",title:\"Í≤ÄÏÉâÏñ¥ ÏûÖÎ†•\",text:\"Ï±Ö Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!\"});return;}setBookList([]);try{const response=await axios.get(`${backServer}/api/search-books`,{params:{query:searchTitle}});let bookInfo=response.data;console.log(response);if(!Array.isArray(bookInfo)){bookInfo=[bookInfo];}if(bookInfo.length>0){setBookList(bookInfo);// Ï±Ö Î¶¨Ïä§Ìä∏ Ï†ÄÏû•\n//console.log(bookList);\n}else{Swal.fire({icon:\"info\",title:\"Í≤ÄÏÉâ Í≤∞Í≥º ÏóÜÏùå\",text:\"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.\"});}}catch(error){//onsole.error(\"Ï±Ö Í≤ÄÏÉâ Ïã§Ìå®:\", error);\nSwal.fire({icon:\"error\",title:\"Í≤ÄÏÉâ Ïã§Ìå®\",text:\"ÏÑúÎ≤ÑÏóê Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.\"});}};const handleBookSelect=book=>{setBookData({title:book.title,author:book.author||\"\",publisher:book.publisher||\"\",description:book.description||\"\",image:book.image||\"\"});};// Ï±Ö Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò\nconst handleUpdateBook=async()=>{try{// ÏÑúÎ≤ÑÏóê Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠\nconst response=await axios.post(`${backServer}/api/books`,bookData);if(response.status===200){Swal.fire({icon:\"success\",title:\"Ï±Ö Îì±Î°ù ÏÑ±Í≥µ\",text:\"Ï±ÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.\"}).then(()=>{window.location.href=\"/\";// ÌéòÏù¥ÏßÄ Î¶¨Îã§Ïù¥Î†âÌä∏\n});}}catch(error){//console.error(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:\", error);\nSwal.fire({icon:\"error\",title:\"Ï±Ö Îì±Î°ù Ïã§Ìå®\",text:\"ÏÑúÎ≤ÑÏóê Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.\"});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title\",children:\"\\uD83D\\uDCDA Book Insert\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uCC45 \\uC815\\uBCF4 \\uAC00\\uC838\\uC624\\uAE30(\\uC81C\\uBAA9 \\uC785\\uB825)...\",value:searchTitle,onChange:e=>setSearchTitle(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(\"div\",{children:bookList.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"book-api-list\",children:bookList.map((book,index)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleBookSelect(book),children:book.title},index))})}),/*#__PURE__*/_jsx(BookForm,{bookData:bookData,setBookData:setBookData}),/*#__PURE__*/_jsx(\"div\",{className:\"update-button-wrap\",children:/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",onClick:handleUpdateBook,children:\"\\uB4F1\\uB85D\"})})]});};export default BookWrite;","map":{"version":3,"names":["React","useState","axios","BookForm","Swal","jsx","_jsx","jsxs","_jsxs","BookWrite","backServer","process","env","REACT_APP_BACK_SERVER","searchTitle","setSearchTitle","bookData","setBookData","title","author","publisher","description","image","bookList","setBookList","handleSearch","fire","icon","text","response","get","params","query","bookInfo","data","console","log","Array","isArray","length","error","handleBookSelect","book","handleUpdateBook","post","status","then","window","location","href","children","className","type","placeholder","value","onChange","e","target","onClick","map","index"],"sources":["/Users/ori/Desktop/project/book/book_front/src/components/book/BookWrite.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport BookForm from \"./BookForm\";\nimport Swal from \"sweetalert2\"; // SweetAlert2 ÏûÑÌè¨Ìä∏\n\nconst BookWrite = () => {\n  const backServer = process.env.REACT_APP_BACK_SERVER;\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [bookData, setBookData] = useState({\n    title: \"\",\n    author: \"\",\n    publisher: \"\",\n    description: \"\",\n    image: \"\",\n  });\n  const [bookList, setBookList] = useState([]);\n\n  const handleSearch = async () => {\n    if (!searchTitle) {\n      Swal.fire({\n        icon: \"warning\",\n        title: \"Í≤ÄÏÉâÏñ¥ ÏûÖÎ†•\",\n        text: \"Ï±Ö Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!\",\n      });\n      return;\n    }\n    setBookList([]);\n    try {\n      const response = await axios.get(`${backServer}/api/search-books`, {\n        params: { query: searchTitle },\n      });\n      let bookInfo = response.data;\n      console.log(response);\n      if (!Array.isArray(bookInfo)) {\n        bookInfo = [bookInfo];\n      }\n\n      if (bookInfo.length > 0) {\n        setBookList(bookInfo); // Ï±Ö Î¶¨Ïä§Ìä∏ Ï†ÄÏû•\n        //console.log(bookList);\n      } else {\n        Swal.fire({\n          icon: \"info\",\n          title: \"Í≤ÄÏÉâ Í≤∞Í≥º ÏóÜÏùå\",\n          text: \"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.\",\n        });\n      }\n    } catch (error) {\n      //onsole.error(\"Ï±Ö Í≤ÄÏÉâ Ïã§Ìå®:\", error);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Í≤ÄÏÉâ Ïã§Ìå®\",\n        text: \"ÏÑúÎ≤ÑÏóê Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.\",\n      });\n    }\n  };\n\n  const handleBookSelect = (book) => {\n    setBookData({\n      title: book.title,\n      author: book.author || \"\",\n      publisher: book.publisher || \"\",\n      description: book.description || \"\",\n      image: book.image || \"\",\n    });\n  };\n\n  // Ï±Ö Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò\n  const handleUpdateBook = async () => {\n    try {\n      // ÏÑúÎ≤ÑÏóê Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠\n      const response = await axios.post(`${backServer}/api/books`, bookData);\n      if (response.status === 200) {\n        Swal.fire({\n          icon: \"success\",\n          title: \"Ï±Ö Îì±Î°ù ÏÑ±Í≥µ\",\n          text: \"Ï±ÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.\",\n        }).then(() => {\n          window.location.href = \"/\"; // ÌéòÏù¥ÏßÄ Î¶¨Îã§Ïù¥Î†âÌä∏\n        });\n      }\n    } catch (error) {\n      //console.error(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:\", error);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Ï±Ö Îì±Î°ù Ïã§Ìå®\",\n        text: \"ÏÑúÎ≤ÑÏóê Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"page-title\">üìö Book Insert</div>\n      {/* Ï±Ö Í≤ÄÏÉâ ÏûÖÎ†• */}\n      <div className=\"search-box\">\n        <input\n          type=\"text\"\n          placeholder=\"Ï±Ö Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞(Ï†úÎ™© ÏûÖÎ†•)...\"\n          value={searchTitle}\n          onChange={(e) => setSearchTitle(e.target.value)}\n        />\n        <button onClick={handleSearch}>Í≤ÄÏÉâ</button>\n      </div>\n\n      <div>\n        {bookList.length > 0 && (\n          <ul className=\"book-api-list\">\n            {bookList.map((book, index) => (\n              <li key={index} onClick={() => handleBookSelect(book)}>\n                {book.title}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      <BookForm bookData={bookData} setBookData={setBookData} />\n      <div className=\"update-button-wrap\">\n        <button className=\"update-button\" onClick={handleUpdateBook}>\n          Îì±Î°ù\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookWrite;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}