{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import BookForm from\"./BookForm\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookWrite=()=>{const backServer=process.env.REACT_APP_BACK_SERVER;const[searchTitle,setSearchTitle]=useState(\"\");const[bookData,setBookData]=useState({title:\"\",author:\"\",publisher:\"\",description:\"\",image:\"\"});const[bookList,setBookList]=useState([]);const handleSearch=async()=>{if(!searchTitle)return alert(\"Ï±Ö Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!\");setBookList([]);try{const response=await axios.get(`${backServer}/api/search-books`,{params:{query:searchTitle}});let bookInfo=response.data;console.log(response);if(!Array.isArray(bookInfo)){bookInfo=[bookInfo];}if(bookInfo.length>0){setBookList(bookInfo);// Ï±Ö Î¶¨Ïä§Ìä∏ Ï†ÄÏû•\nconsole.log(bookList);}else{alert(\"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.\");}}catch(error){console.error(\"Ï±Ö Í≤ÄÏÉâ Ïã§Ìå®:\",error);alert(\"Í≤ÄÏÉâ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");}};const handleBookSelect=book=>{setBookData({title:book.title,author:book.author||\"\",publisher:book.publisher||\"\",description:book.description||\"\",image:book.image||\"\"});};// Ï±Ö Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò\nconst handleUpdateBook=async()=>{try{// ÏÑúÎ≤ÑÏóê Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠\nconst response=await axios.post(`${backServer}/api/books`,bookData);if(response.status===200){alert(\"Ï±ÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.\");window.location.href=\"/\";// ÌéòÏù¥ÏßÄ Î¶¨Îã§Ïù¥Î†âÌä∏\n}}catch(error){console.error(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:\",error);alert(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title\",children:\"\\uD83D\\uDCDA Book Insert\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uCC45 \\uC815\\uBCF4 \\uAC00\\uC838\\uC624\\uAE30(\\uC81C\\uBAA9 \\uC785\\uB825)...\",value:searchTitle,onChange:e=>setSearchTitle(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(\"div\",{children:bookList.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"book-api-list\",children:bookList.map((book,index)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleBookSelect(book),children:book.title},index))})}),/*#__PURE__*/_jsx(BookForm,{bookData:bookData,setBookData:setBookData}),/*#__PURE__*/_jsx(\"div\",{className:\"update-button-wrap\",children:/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",onClick:handleUpdateBook,children:\"\\uB4F1\\uB85D\"})})]});};export default BookWrite;","map":{"version":3,"names":["React","useState","axios","BookForm","jsx","_jsx","jsxs","_jsxs","BookWrite","backServer","process","env","REACT_APP_BACK_SERVER","searchTitle","setSearchTitle","bookData","setBookData","title","author","publisher","description","image","bookList","setBookList","handleSearch","alert","response","get","params","query","bookInfo","data","console","log","Array","isArray","length","error","handleBookSelect","book","handleUpdateBook","post","status","window","location","href","children","className","type","placeholder","value","onChange","e","target","onClick","map","index"],"sources":["/Users/ori/Desktop/project/book/book_front/src/components/book/BookWrite.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport BookForm from \"./BookForm\";\n\nconst BookWrite = () => {\n  const backServer = process.env.REACT_APP_BACK_SERVER;\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [bookData, setBookData] = useState({\n    title: \"\",\n    author: \"\",\n    publisher: \"\",\n    description: \"\",\n    image: \"\",\n  });\n  const [bookList, setBookList] = useState([]);\n\n  const handleSearch = async () => {\n    if (!searchTitle) return alert(\"Ï±Ö Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî!\");\n    setBookList([]);\n    try {\n      const response = await axios.get(`${backServer}/api/search-books`, {\n        params: { query: searchTitle },\n      });\n      let bookInfo = response.data;\n      console.log(response);\n      if (!Array.isArray(bookInfo)) {\n        bookInfo = [bookInfo];\n      }\n\n      if (bookInfo.length > 0) {\n        setBookList(bookInfo); // Ï±Ö Î¶¨Ïä§Ìä∏ Ï†ÄÏû•\n        console.log(bookList);\n      } else {\n        alert(\"Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.\");\n      }\n    } catch (error) {\n      console.error(\"Ï±Ö Í≤ÄÏÉâ Ïã§Ìå®:\", error);\n      alert(\"Í≤ÄÏÉâ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");\n    }\n  };\n\n  const handleBookSelect = (book) => {\n    setBookData({\n      title: book.title,\n      author: book.author || \"\",\n      publisher: book.publisher || \"\",\n      description: book.description || \"\",\n      image: book.image || \"\",\n    });\n  };\n\n  // Ï±Ö Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò\n  const handleUpdateBook = async () => {\n    try {\n      // ÏÑúÎ≤ÑÏóê Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠\n      const response = await axios.post(`${backServer}/api/books`, bookData);\n      if (response.status === 200) {\n        alert(\"Ï±ÖÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§.\");\n        window.location.href = \"/\"; // ÌéòÏù¥ÏßÄ Î¶¨Îã§Ïù¥Î†âÌä∏\n      }\n    } catch (error) {\n      console.error(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:\", error);\n      alert(\"Ï±Ö ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");\n    }\n  };\n  return (\n    <div>\n      <div className=\"page-title\">üìö Book Insert</div>\n      {/* Ï±Ö Í≤ÄÏÉâ ÏûÖÎ†• */}\n      <div className=\"search-box\">\n        <input\n          type=\"text\"\n          placeholder=\"Ï±Ö Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞(Ï†úÎ™© ÏûÖÎ†•)...\"\n          value={searchTitle}\n          onChange={(e) => setSearchTitle(e.target.value)}\n        />\n        <button onClick={handleSearch}>Í≤ÄÏÉâ</button>\n      </div>\n\n      <div>\n        {bookList.length > 0 && (\n          <ul className=\"book-api-list\">\n            {bookList.map((book, index) => (\n              <li key={index} onClick={() => handleBookSelect(book)}>\n                {book.title}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      <BookForm bookData={bookData} setBookData={setBookData} />\n      <div className=\"update-button-wrap\">\n        <button className=\"update-button\" onClick={handleUpdateBook}>\n          Îì±Î°ù\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookWrite;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}