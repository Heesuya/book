{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import axios from\"axios\";import BookForm from\"./BookForm\";import Swal from\"sweetalert2\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookUpdate=()=>{const{bookId}=useParams();const navigate=useNavigate();const backServer=process.env.REACT_APP_BACK_SERVER;const[bookData,setBookData]=useState({title:\"\",author:\"\",publisher:\"\",description:\"\",image:\"\"});useEffect(()=>{// 책 정보 가져오기\naxios.get(`${backServer}/api/books/${bookId}`).then(res=>{setBookData(res.data);// 서버에서 가져온 책 데이터를 state에 저장\nconsole.log(res.data);}).catch(err=>{Swal.fire({icon:\"error\",title:\"책 정보 불러오기 실패\",text:\"서버에 문의 해주세요.\"});//console.error(\"책 정보 불러오기 실패\", err);\n});},[bookId]);const handleSave=()=>{// 서버에 수정된 책 데이터 전송\naxios.put(`${backServer}/api/books/${bookId}`,bookData).then(res=>{Swal.fire({icon:\"success\",title:\"성공\",text:\"책 정보가 성공적으로 수정되었습니다.\"});navigate(`/book/view/${bookId}`);// 수정 후 책 상세 페이지로 이동\n}).catch(err=>{Swal.fire({icon:\"error\",title:\"수정 실패\",text:\"서버에 문의해주세요.\"});//console.error(\"책 정보 수정 실패\", err);\n});};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-update-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uCC45 \\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(BookForm,{bookData:bookData,setBookData:setBookData// 수정된 데이터를 상위 컴포넌트로 전달\n}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-wrap\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:handleSave,children:\"\\uC800\\uC7A5\\uD558\\uAE30\"})})]});};export default BookUpdate;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","BookForm","Swal","jsx","_jsx","jsxs","_jsxs","BookUpdate","bookId","navigate","backServer","process","env","REACT_APP_BACK_SERVER","bookData","setBookData","title","author","publisher","description","image","get","then","res","data","console","log","catch","err","fire","icon","text","handleSave","put","className","children","onClick"],"sources":["/Users/ori/Desktop/project/book/book_front/src/components/book/BookUpdate.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport BookForm from \"./BookForm\";\nimport Swal from \"sweetalert2\";\n\nconst BookUpdate = () => {\n  const { bookId } = useParams();\n  const navigate = useNavigate();\n  const backServer = process.env.REACT_APP_BACK_SERVER;\n\n  const [bookData, setBookData] = useState({\n    title: \"\",\n    author: \"\",\n    publisher: \"\",\n    description: \"\",\n    image: \"\",\n  });\n\n  useEffect(() => {\n    // 책 정보 가져오기\n    axios\n      .get(`${backServer}/api/books/${bookId}`)\n      .then((res) => {\n        setBookData(res.data); // 서버에서 가져온 책 데이터를 state에 저장\n        console.log(res.data);\n      })\n      .catch((err) => {\n        Swal.fire({\n          icon: \"error\",\n          title: \"책 정보 불러오기 실패\",\n          text: \"서버에 문의 해주세요.\",\n        });\n        //console.error(\"책 정보 불러오기 실패\", err);\n      });\n  }, [bookId]);\n\n  const handleSave = () => {\n    // 서버에 수정된 책 데이터 전송\n    axios\n      .put(`${backServer}/api/books/${bookId}`, bookData)\n      .then((res) => {\n        Swal.fire({\n          icon: \"success\",\n          title: \"성공\",\n          text: \"책 정보가 성공적으로 수정되었습니다.\",\n        });\n        navigate(`/book/view/${bookId}`); // 수정 후 책 상세 페이지로 이동\n      })\n      .catch((err) => {\n        Swal.fire({\n          icon: \"error\",\n          title: \"수정 실패\",\n          text: \"서버에 문의해주세요.\",\n        });\n        //console.error(\"책 정보 수정 실패\", err);\n      });\n  };\n\n  return (\n    <div className=\"book-update-container\">\n      <h1>책 수정하기</h1>\n      <BookForm\n        bookData={bookData}\n        setBookData={setBookData} // 수정된 데이터를 상위 컴포넌트로 전달\n      />\n      <div className=\"btn-wrap\">\n        <button className=\"btn-secondary\" onClick={handleSave}>\n          저장하기\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookUpdate;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,IAAI,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAEC,MAAO,CAAC,CAAGV,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,UAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,CAEpD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,CACvCmB,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,EAAE,CACVC,SAAS,CAAE,EAAE,CACbC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EACT,CAAC,CAAC,CAEFxB,SAAS,CAAC,IAAM,CACd;AACAI,KAAK,CACFqB,GAAG,CAAC,GAAGX,UAAU,cAAcF,MAAM,EAAE,CAAC,CACxCc,IAAI,CAAEC,GAAG,EAAK,CACbR,WAAW,CAACQ,GAAG,CAACC,IAAI,CAAC,CAAE;AACvBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACC,IAAI,CAAC,CACvB,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,EAAK,CACd1B,IAAI,CAAC2B,IAAI,CAAC,CACRC,IAAI,CAAE,OAAO,CACbd,KAAK,CAAE,cAAc,CACrBe,IAAI,CAAE,cACR,CAAC,CAAC,CACF;AACF,CAAC,CAAC,CACN,CAAC,CAAE,CAACvB,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAwB,UAAU,CAAGA,CAAA,GAAM,CACvB;AACAhC,KAAK,CACFiC,GAAG,CAAC,GAAGvB,UAAU,cAAcF,MAAM,EAAE,CAAEM,QAAQ,CAAC,CAClDQ,IAAI,CAAEC,GAAG,EAAK,CACbrB,IAAI,CAAC2B,IAAI,CAAC,CACRC,IAAI,CAAE,SAAS,CACfd,KAAK,CAAE,IAAI,CACXe,IAAI,CAAE,sBACR,CAAC,CAAC,CACFtB,QAAQ,CAAC,cAAcD,MAAM,EAAE,CAAC,CAAE;AACpC,CAAC,CAAC,CACDmB,KAAK,CAAEC,GAAG,EAAK,CACd1B,IAAI,CAAC2B,IAAI,CAAC,CACRC,IAAI,CAAE,OAAO,CACbd,KAAK,CAAE,OAAO,CACde,IAAI,CAAE,aACR,CAAC,CAAC,CACF;AACF,CAAC,CAAC,CACN,CAAC,CAED,mBACEzB,KAAA,QAAK4B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpC/B,IAAA,OAAA+B,QAAA,CAAI,iCAAM,CAAI,CAAC,cACf/B,IAAA,CAACH,QAAQ,EACPa,QAAQ,CAAEA,QAAS,CACnBC,WAAW,CAAEA,WAAa;AAAA,CAC3B,CAAC,cACFX,IAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvB/B,IAAA,WAAQ8B,SAAS,CAAC,eAAe,CAACE,OAAO,CAAEJ,UAAW,CAAAG,QAAA,CAAC,0BAEvD,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}